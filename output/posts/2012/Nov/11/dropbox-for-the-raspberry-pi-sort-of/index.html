<!DOCTYPE html>         <!-- This is the HTML5 doctype -->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Dropbox for the Raspberry Pi (sort of) - Jeff's Skinner Box</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="../../../../../favicon.ico" rel="icon">

    <!-- Open Graph tags -->
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Dropbox for the Raspberry Pi (sort of)"/>
            <meta property="og:url" content="../../../../../posts/2012/Nov/11/dropbox-for-the-raspberry-pi-sort-of/"/>
            <meta property="og:description" content="I'm presently using Dropbox as a service for quick and easy movement of files between multiple PCs I use. I would like the same on the Raspberry Pi, particularly for moving files from my PC to the RPi."/>

    <!-- Bootstrap -->
        <link href="../../../../../theme/css/bootstrap.flatly.min.css" rel="stylesheet" type="text/css"/>

    <!-- Font Awesome and Google Fonts -->
    <link href="../../../../../theme/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Knewave' rel='stylesheet' type='text/css'>

    <link href="../../../../../theme/css/pygments/default.css" rel="stylesheet">
    <link href="../../../../../theme/css/style.css" rel="stylesheet" type="text/css"/>
        <link href="../../../../../static/custom.css" rel="stylesheet">

</head>

<body>
<div class="navbar navbar-default navbar-fixed-top" role="navigation" style="box-shadow: 5px 5px 10px #888888;">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="../../../../../" style="font-family: Knewave, cursive; font-size: 48px; color: #FFFFFF">
Jeff's Skinner Box&nbsp;            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                    <li><a href="/pages/about-me/">About Me</a></li>
                    <li><a href="http://127.0.0.1:8080">MicroContent</a></li>
                    <li><a href="/pages/open-notebook/">Open Notebook</a></li>
            </ul>
            <ul class="nav navbar-nav">
                <li><a href="../../../../../archives.html">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
  <!-- GitHub Ribbon - https://github.com/blog/273-github-ribbons -->
<!-- GitHub Ribbon - https://github.com/blog/273-github-ribbons -->
    <a href="https://github.com/jeffskinnerbox/jeffskinnerbox.github.io/tree/source" target="_blank">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://github-camo.global.ssl.fastly.net/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png">
    </a>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="../../../../../posts/2012/Nov/11/dropbox-for-the-raspberry-pi-sort-of/"
                       rel="bookmark"
                       title="Permalink to Dropbox for the Raspberry Pi (sort of)">
                        Dropbox for the Raspberry Pi (sort of)
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2012-11-11T00:01:00-05:00"> Sunday&nbsp;&nbsp;&nbsp;&nbsp;November 11, 2012</time>
    </span>



&nbsp;&nbsp;&nbsp;
<i class="fa fa-tags fa-lg"></i>
    <a class="btn btn-default btn-xs" href="../../../../../tag/linux/">Linux</a>
        &nbsp;
    <a class="btn btn-default btn-xs" href="../../../../../tag/raspberry-pi/">Raspberry Pi</a>
        &nbsp;
    <a class="btn btn-default btn-xs" href="../../../../../tag/dropbox/">Dropbox</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>I'm presently using <a href="https://www.dropbox.com/">Dropbox</a> as a service for quick &amp; easy movement of files between multiple PCs I use.  Its copy &amp; paste operation is very intuitive on a Windows PC. I would like the same on the Raspberry Pi (RPi), particularly for moving files from my PC to the RPi.  I wanted the same utility on my RPi, but at the same time, I want the Linux command line paradigm supported and not be force to run X Windows on the RPi.</p>
<p>I did some searching and found things like <a href="https://www.dropbox.com/install?os=lnx">Dropbox's Linux distribution</a> (which I wasn't confident would work "out of the box" for the RPi's ARM architecture, but source is provided),  <a href="http://www.lifehacker.com.au/2011/07/how-to-set-up-a-file-syncing-dropbox-clone-you-control/">GoodSync</a> or <a href="http://hm-innovations.com/2012/10/29/best-way-to-use-raspberry-pi-and-turn-it-into-a-dropbox/">Owncloud</a> (which wouldn't access my existing Dropbox files but instead create an alternative), <a href="http://raspberrypigadget.wordpress.com/2012/07/01/day-six-dropbox-access/">python</a> or  <a href="http://harizanov.com/2012/08/dropbox-shell-script-for-raspberrypi/">bash shell</a> based up/down loaders (appears to behave like a simplified FTP tool), or the <a href="http://fuse.sourceforge.net/sshfs.html">Secure SHell File System (SSHFS)</a> based approach (the PC's Dropbox directory is mounted on the RPi).</p>
<p>While the <a href="https://www.dropbox.com/install?os=lnx">Dropbox's Linux distribution</a> is likely the ultimate way to go, I didn't want to commit myself to the effort it would potentially require.  I settled on the SSHFS based approach.  I'm running my <a href="http://jeffskinnerbox.wordpress.com/2012/09/09/raspberry-pi-has-arrived/">RPi headless</a> and access it via my PC using <a href="http://x.cygwin.com/">Cygwin/X</a> and <a href="http://www.openssh.org/">Secure Shell (ssh)</a>.  With the SSHFS approach, I could make the Dropbox directory available for mounting at boot-up or mount it at will.  I only envision using the RPi-based Dropbox when I'm doing development and I will be doing that from my PC.  So this SSHFS approach seems fine for the way that I operate.</p>
<p>The SSHFS approach means files will not really be replicated on the RPi, like Dropbox does.  The files will reside within my PC's Dropbox folder (and replicated on my other PCs via the Dropbox service) but accessible by the RPi via the SSHFS file mount.  This means I can't have any applications I run on the RPi depend on files located in its Dropbox directory since it may not be always mounted.  I'm OK with this limitation, and in fact is consistent with the ad-hoc purpose I have for the Dropbox directory.
<h2>Installation Required on the PC</h2>
For me, nothing needs to be done here.  I already have Dropbox running on my PC, and via Cygwin/X, I have the foundations required for the host side of the SSHFS solution.  If you need help with this, <a href="http://db.tt/WG4dR9shttp://db.tt/WG4dR9s">signup for Dropbox here</a> and find out<a href="http://jeffskinnerbox.wordpress.com/2012/10/04/establishing-an-x-window-system-environment-for-my-pc-and-raspberry-pi/"> how I'm using Cygwin/X here</a>.
<h2>Installation Required on the RPi</h2>
On the client side of the solution, you'll need to install <a href="http://fuse.sourceforge.net/sshfs.html">SSHFS</a> and <a href="http://fuse.sourceforge.net/">FUSE</a>. FUSE is the user-space filesystem framework and is the foundation on which SSHFS resides. FUSE allows user-space software, SSH in this case, to present a virtual file system interface to the user; something generally only done by the Linux kernel.  SSHFS connects to the remote system and provide the look and feel of a regular file system interface for remote files. On the RPi, install SSHFS via the command:</p>
<div class="codehilite" style="background: #f0f3f3"><pre style="line-height: 125%"><span></span>sudo apt-get install sshfs
</pre></div>


<p>FUSE appear to be already installed on the RPi or maybe comes with SSHFS. Next you need to add required users to the FUSE usergroup.  In my case, that is the user pi.  You can see the existing groups pi is part of via the command <code>groups pi</code>.  You can validate that the FUSE user group has been created by using the command <code>cat /etc/group | grep fuse</code>.  To add pi to the FUSE user group, use the command:</p>
<div class="codehilite" style="background: #f0f3f3"><pre style="line-height: 125%"><span></span>sudo gpasswd -a pi fuse
</pre></div>


<p>The fuse group lets you limit which users are allowed to use FUSE-based file systems, in my case the Dropbox. This is important because FUSE installs <a href="http://www.acm.uiuc.edu/workshops/security/setuid.html">setuid programs</a>, which always carry security implications.
<h2>Configuring the Dropbox File System</h2>
Now its time to make your Dropbox directory on the RPi, and mount it to the PC's instance of Dropbox. On the RPi, use this command to create the Dropbox:</p>
<div class="codehilite" style="background: #f0f3f3"><pre style="line-height: 125%"><span></span>mkdir ~/Dropbox
</pre></div>


<p>The next thing to do is to make sure that you can connect to the PC via ssh.  When I installed Cygwin, my focus was on using it as an X Server and making ssh connections from the PC to RPi.  I never tried the inverse (connect from the RPi to the PC) and that is what SSHFS is effectively doing.  So check for two things:
<ul>
<ul>
    <li>Is the ssh server running on the PC?  You can check for its status via the command <code>cygrunsrv -Q sshd</code>. In my case it was running, so its fine.</li>
    <li>Is the port used by the ssh server on the PC open? You'll need to <a href="http://lifehacker.com/205090/geek-to-live--set-up-a-personal-home-ssh-server">open SSH port 22</a> for ssh services to work.  You can check its status by attempting to use it.  In my case, this was <code>ssh Jeff@HomePC.home</code>.  If this command appears to hang or time out (as it did for me), the port is likely blocked.  You'll need to go to your <a href="http://www.dummies.com/how-to/content/how-to-open-a-port-in-the-windows-7-firewall.html">Windows Firewall</a> and open port 22.</li>
</ul>
</ul>
There is another Cygwin sublimity that has to be taken into consideration.  When using the Cygwin, Windows drive letters are mapped to a <a href="http://znark.com/tech/cygwin.html">special directory</a>.  In my case, the Dropbox directory appears to Cygwin to have the following path: <code>/cygdrive/c/Users/Jeff/Dropbox</code>.</p>
<p>With this all addressed, <span style="text-decoration:underline;">reboot the RPi</span>, and then you can now fire up you RPi Dropbox via:</p>
<div class="codehilite" style="background: #f0f3f3"><pre style="line-height: 125%"><span></span>sshfs Jeff@HomePC.home:/cygdrive/c/Users/Jeff/Dropbox ~/Dropbox
</pre></div>


<p>After you supply the PC's password, you should now be able to access the Dropbox directory on the PC.  If you wish, you can remove the file system connection to the PC via the command:</p>
<div class="codehilite" style="background: #f0f3f3"><pre style="line-height: 125%"><span></span>fusermount -u ~/Dropbox
</pre></div>


<p>This connection will stay established as long as you don't do the <code>fusermount -u</code> or reboot the RPi.  If you wish to mount the file system upon boot-up, and avoid executing the <code>sshfs</code> when you log-in, you can follow the procedure outline in the article that initially inspired me: <a href="http://mitchtech.net/dropbox-on-raspberry-pi-via-sshfs/">Dropbox on Raspberry Pi via SSHFS</a>
<h2>Something to Keep in Mind</h2>
While for the most part, moving between Windows/DOS and the Linux file systems isn't a problem, there is one thing to remember. Windows-based text editors put one set of special characters at the end of lines (i.e. carriage return and line break = '\r\n'), while Unix/Linux puts other characters (i.e. line break = '\n').  This <a href="http://www.codinghorror.com/blog/2010/01/the-great-newline-schism.html">odd anomaly</a> is normally harmless, but some applications on a Linux cannot understand these characters and can cause Linux to not respond correctly.</p>
<p>The best example of Linux behaving badly (and the only one I know) is the execution of “<a href="http://bash.cyberciti.biz/guide/Shebang">shebang</a>” or the “#!...” at the top of a bash, python, perl, etc. script.  If you edit these files in DOS, then move them to Linux, shebang will stop working.  Editing them under DOS is the origin of the problem, since a DOS based text editor will inject the extra carriage return character at the end of the text line.</p>
<p>To fix this problem, you can quickly convert an ASCII text file from DOS format (carriage return and line break) to the Unix format (line break), you can use the tool <a href="http://linux.die.net/man/1/dos2unix"><code>dos2unix</code></a>.  Run this utility on the effected file and shebang should work once again.
<h2>Epilogue</h2>
At its foundation, SSH functions as a protocol for authenticating and encrypting remote shell sessions.  SSH can be thought of as much more than just a secure shell.  Using SSH's foundation, SSHFS creates a new capability.  To learn more, check out the link <a href="http://matt.might.net/articles/ssh-hacks/">SSH: More than secure shell</a>.</p>
<p>Key sources I consulted to write this include:
<ul>
<ul>
    <li><a href="http://www.linuxjournal.com/article/8904?page=0,0">SSHFS: Super Easy File Access over SSH</a></li>
    <li><a href="http://mitchtech.net/dropbox-on-raspberry-pi-via-sshfs/">Dropbox on Raspberry Pi via SSHFS</a></li>
    <li><a href="http://www.debianadmin.com/mount-a-remote-file-system-through-ssh-using-sshfs.html">Mount a remote file system through ssh Using sshfs</a></li>
</ul>
</ul></p>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3 well well-sm" id="sidebar" style="box-shadow: 5px 5px 10px #888888;">

<aside>
    <section>
        <ul class="list-group list-group-flush">
                <div style="text-align: center;">
                    <h3><a href="../../../../../pages/about-me/" style="font-family: Knewave, cursive; font-size: 18;">My Electronics Projects And Other Diversions</a>
                    <a href="../../../../../pages/about-me/">
                        <img class="img-rounded" src="../../../../../extra/frustrated-engineer.jpg" alt="Side Bar Picture" height="100%" width="100%">
                    </a>
                </div>

            <font color=#990000>
                <li class="list-group-item"><a href="../../../../../pages/"><h4><i class="fa fa-exclamation-triangle fa-lg"></i><span class="icon-label">Testing Zone</span></h4></a>
                </li>

                <li class="list-group-item"><a href="../../../../../drafts/"><h4><i class="fa fa-edit fa-lg"></i><span class="icon-label">Draft Articles</span></h4></a>
                </li>
            </font>

            <li class="list-group-item"><a href="../../../../../categories.html"><h4><i class="fa fa-folder-open fa-lg"></i><span class="icon-label">Categories</span></h4></a>
            </li>

            <li class="list-group-item"><a href="../../../../../tags.html"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
            </li>

            <li class="list-group-item"><a href="../../../../../index.html"><h4><i class="fa fa-clock-o fa-lg"></i><span class="icon-label">Recent Posts</span></h4></a>
            </li>

            <li class="list-group-item"><a href="../../../../../pages/open-notebook/index.html"><h4><i class="fa fa-book fa-lg"></i><span class="icon-label">Open Notebook</span></h4></a>

<li class="list-group-item"><h4><i class="fa fa-file-text fa-lg"></i><span class="icon-label">Site Pages</span></h4>
    <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="/pages/linux-and-python-packages-for-my-raspberry-pi/index.html" target="_blank">
                RPi Packages
            </a>
        </li>
        <li class="list-group-item">
            <a href="/tag/how-to/index.html" target="_blank">
                How To
            </a>
        </li>
        <li class="list-group-item">
            <a href="/tag/cheat-sheet/index.html" target="_blank">
                Cheat Sheets
            </a>
        </li>
    </ul>
</li>
<li class="list-group-item"><h4><i class="fa fa-puzzle-piece fa-lg"></i><span class="icon-label">MicroContent</span></h4>
    <ul class="list-group" id="wiki">
        <li class="list-group-item">
            <a href="http://127.0.0.1:8080/#Potential Projects" target="_blank">
                Project Ideas
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://127.0.0.1:8080/#Topics for Study" target="_blank">
                Things to Study
            </a>
        </li>
    </ul>
</li>
<li class="list-group-item"><h4><i class="fa fa-link fa-lg"></i><span class="icon-label">External Links</span></h4>
    <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://tiddlywiki.com/" target="_blank">
                TiddlyWiki
            </a>
        </li>
    </ul>
</li>
<li class="list-group-item"><h4><i class="fa fa-group fa-lg"></i><span class="icon-label">Social Media</span></h4>
    <ul class="list-group" id="social">
        <li class="list-group-item"><a href="https://github.com/jeffskinnerbox" target="_blank">
            <i class="fa fa-github"></i> Github
        </a></li>
        <li class="list-group-item"><a href="https://hackaday.io/jeffskinnerbox" target="_blank">
            <i class="fa fa-hacker-news"></i> Hackaday
        </a></li>
        <li class="list-group-item"><a href="https://twitter.com/jeffskinnerbox" target="_blank">
            <i class="fa fa-twitter"></i> Twitter
        </a></li>
        <li class="list-group-item"><a href="https://www.flickr.com/photos/104241758@N03/" target="_blank">
            <i class="fa fa-flickr"></i> Flickr
        </a></li>
        <li class="list-group-item"><a href="https://delicious.com/jeffskinnerbox" target="_blank">
            <i class="fa fa-delicious"></i> Delicious
        </a></li>
        <li class="list-group-item"><a href="https://www.pinterest.com/jeffskinnerbox/my-electronics-projects-and-other-diversions/" target="_blank">
            <i class="fa fa-pinterest"></i> Pinterest
        </a></li>
        <li class="list-group-item"><a href="http://getpocket.com/a/queue/" target="_blank">
            <i class="fa fa-chevron-circle-down"></i> Pocket
        </a></li>
        <li class="list-group-item"><a href="http://jeffskinnerbox.tumblr.com/" target="_blank">
            <i class="fa fa-tumblr"></i> Tumblr
        </a></li>
        <li class="list-group-item"><a href="http://instagram.com/jeffskinnerbox" target="_blank">
            <i class="fa fa-instagram"></i> Instagram
        </a></li>
        <li class="list-group-item"><a href="https://www.facebook.com/jeff.irland" target="_blank">
            <i class="fa fa-facebook"></i> Facebook
        </a></li>
        <li class="list-group-item"><a href="https://linkedin.com/in/jeffreyirland" target="_blank">
            <i class="fa fa-linkedin"></i> Linkedin
        </a></li>
        <li class="list-group-item"><a href="http://www.commandlinefu.com/commands/by/jeffskinnerbox" target="_blank">
            <i class="fa fa-terminal"></i> CommandLineFu
        </a></li>
        <li class="list-group-item"><a href="https://disqus.com/by/jeffskinnerbox/" target="_blank">
            <i class="fa fa-comment"></i> DISQUS
        </a></li>
    </ul>
</li> 

<li class="list-group-item"><h4><i class="fa fa-thumbs-up fa-lg"></i><span class="icon-label">Reposted At</span></h4>
    <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://www.eeweb.com/websites/jeffs-skinner-box" target="_blank">
                EEWeb.com
            </a>
        </li>
    </ul>
</li>
<li class="list-group-item"><h4><i class="fa fa-gears fa-lg"></i><span class="icon-label">Admin</span></h4>
    <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="https://www.google.com/analytics/web/?hl=en#report/visitors-overview/a43272292w73270397p83408137/" target="_blank">
                Google Analytics
            </a>
        </li>
        <li class="list-group-item">
            <a href="https://github.com/jeffskinnerbox/jeffskinnerbox.github.io" target="_blank">
                Web Site Source Code
            </a>
        </li>
    </ul>
</li>
            <li class="list-group-item"><a href="../../../../../pages/this-blog-is-powered-by/index.html"><h4><i class="fa fa-rocket fa-lg"></i><span class="icon-label">This Blog Powered By</span></h4></a>

        </ul>
    </section>

</aside>        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">This Blog Powered By 
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://tiddlywiki.com/" target="_blank">TiddlyWiki</a>,
            <a href="http://ipython.org/notebook.html" target="_blank">Python Notebook</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>, And
            <a href="/pages/this-blog-is-powered-by/index.html" target="_blank">Other Things</a>.
            <p>
            <a href="http://opensource.org/">
                <img src="/images/logos/open_source_logo.png" alt="Open Source Logo" title="The Open Source Initiative (OSI) is a non-profit corporation with global scope formed to educate about and advocate for the benefits of open source, and to build bridges among different constituencies in the open source community. The OSI maintains the Open Source Definition and the list of Open Source Initiative-approved licenses." height="40px" width="40px">
            </a>
            <a href="http://www.oshwa.org/">
                <img src="/images/logos/open-soruce-hardware-logo-800-px.png" alt="Open Source Hardware Logo" title="The Open Source Hardware Association aims to be the voice of the open hardware community, ensuring that technological knowledge is accessible to everyone, and encouraging the collaborative development of technology that serves education, environmental sustainability, and human welfare." height="40px" width="40px">
            </a>
            <small>
                All my work on this blog is
                <a href="http://opensource.org/licenses/MIT/" target="_blank">MIT Licensed, open, and free</a>,
                except where indicated otherwise.
            </small>
            </p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://code.jquery.com/jquery.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="../../../../../theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="../../../../../theme/js/respond.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            if (!window.jXHR) {
                var jxhr = document.createElement('script');
                jxhr.type = 'text/javascript';
                jxhr.src = '../../../../../theme/js/jXHR.js';
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(jxhr, s);
            }

            github.showRepos({
                user: 'jeffskinnerbox',
                count: 5,
                skip_forks: false,
                target: '#gh_repos'
            });
        });
    </script>
    <script src="../../../../../theme/js/github.js" type="text/javascript"></script>
</body>
</html>